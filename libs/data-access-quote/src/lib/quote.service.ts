import { Injectable } from '@angular/core'
import { HttpClient } from '@angular/common/http'
import { Observable, of } from 'rxjs'

import { ICar, IQuoteValidator, ISubmitQuote } from '@qover/shared-quote'

@Injectable({ providedIn: 'root' })
export class QuoteService {

    ///////////////////////////////////////////////////////////////////////////////////////////////
    /////////////////////////////////// Instance members //////////////////////////////////////////
    ///////////////////////////////////////////////////////////////////////////////////////////////

    private _cars: ICar[]

    ///////////////////////////////////////////////////////////////////////////////////////////////
    /////////////////////////////////// Constructor ///////////////////////////////////////////////
    ///////////////////////////////////////////////////////////////////////////////////////////////

    constructor(private readonly http: HttpClient) { }

    ///////////////////////////////////////////////////////////////////////////////////////////////
    /////////////////////////////////// Public methods ////////////////////////////////////////////
    ///////////////////////////////////////////////////////////////////////////////////////////////

    /**********************************************************************************************
     * @method getCars
     *********************************************************************************************/
    public getCars(): Observable<ICar[]> {
        return of([
            {carId: 1, carName: 'Audi'},
            {carId: 2, carName: 'BMW'},
            {carId: 3, carName: 'Porsche'},
        ])
        return this.http.get<ICar[]>('/api/login')
    }

    /**********************************************************************************************
     * @method getQuoteValidator
     *********************************************************************************************/
    public getQuoteValidator(): Observable<IQuoteValidator> {
        return of({
            minAge: 18,
            minPrice: 5000,
            minAgePerCar: {3: 25},
        })
    }

    /**********************************************************************************************
     * @method submitLogin
     *********************************************************************************************/
    public submitQuote(submitQuote: ISubmitQuote): Observable<number> {
        return of(42)
        return this.http.post<number>('/api/login', submitQuote)
    }
}
